# ะะฝัะตะณัะฐัะธั Bookechi ะฒ Telegram-ะฑะพั

## ะัะฟะพะปะฝะตะฝะฝัะต ะทะฐะดะฐะฝะธั

### 0. ะััะธััะตะฝั ั ััะตะบะตัะพะผ ะทะฐะดะฐั โ

ะะพะปะฝะพัะตะฝะฝัะน ััะตะบะตั ะทะฐะดะฐั ั AI-ัะตะบะพะผะตะฝะดะฐัะธัะผะธ:

**ะะพะผะฐะฝะดั:**
```
/tasks                    โ ะฒัะต ะทะฐะดะฐัะธ
/tasks high               โ ะทะฐะดะฐัะธ ั ะฒััะพะบะธะผ ะฟัะธะพัะธัะตัะพะผ
/tasks bug open           โ ะพัะบััััะต ะฑะฐะณะธ
/task BOOK-1              โ ะฟะพะดัะพะฑะฝะพััะธ ะทะฐะดะฐัะธ
/task_new <ะฝะฐะทะฒะฐะฝะธะต>      โ ัะพะทะดะฐัั ะทะฐะดะฐัั
/task_new bug high ะัะฐั   โ ัะพะทะดะฐัั ะฑะฐะณ ั ะฒััะพะบะธะผ ะฟัะธะพัะธัะตัะพะผ
/task_status BOOK-1 done  โ ะธะทะผะตะฝะธัั ััะฐััั
/task_assign BOOK-1 dev1  โ ะฝะฐะทะฝะฐัะธัั ะธัะฟะพะปะฝะธัะตะปั
/task_priority BOOK-1 critical โ ะธะทะผะตะฝะธัั ะฟัะธะพัะธัะตั
/task_comment BOOK-1 ัะตะบัั โ ะดะพะฑะฐะฒะธัั ะบะพะผะผะตะฝัะฐัะธะน
/task_recommend           โ AI ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฟัะธะพัะธัะตัะฐะผ
```

**ะัะธะผะตั:**
```
/tasks high

๐ ะะฐะดะฐัะธ (4)
ะคะธะปััั: ะฟัะธะพัะธัะตั=high

๐ BOOK-2 ๐ด ๐
   ะัะฟัะฐะฒะธัั ะบัะฐั ะฟัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ะพะฑะปะพะถะบะธ

๐ BOOK-5 ๐ ๐
   ะกัะฐัะธััะธะบะฐ ะฟะพะบะฐะทัะฒะฐะตั ะฝะตะฒะตัะฝัะต ะดะฐะฝะฝัะต
...

/task_recommend

๐ฏ ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะทะฐะดะฐัะฐะผ (6 ะพัะบััััั)

1. BOOK-2 (critical bug) โ ะดะตะปะฐัั ะฟะตัะฒัะผ, ะฑะปะพะบะธััะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
2. BOOK-5 (high bug) โ ัะฒัะทะฐะฝ ั BOOK-2, ะฟัะพะฒะตัะธัั ะฟะพัะปะต ัะธะบัะฐ
3. BOOK-8 (high feature) โ ะฟะพะธัะบ ะฒะฐะถะตะฝ ะดะปั UX
...
```

### 0.1. ะกะตัะฒะธั ะฟะพะดะดะตัะถะบะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน โ

ะะตะถะธะผ ะฟะพะดะดะตัะถะบะธ ั ัะธััะตะผะพะน ัะธะบะตัะพะฒ:
- RAG ะฟะพ FAQ ะธ ะดะพะบัะผะตะฝัะฐัะธะธ Bookechi
- JSON-ััะฐะฝะธะปะธัะต ัะธะบะตัะพะฒ ั ะธััะพัะธะตะน ะฟะตัะตะฟะธัะบะธ
- ะะพะฝัะตะบัั ัะธะบะตัะฐ ััะธััะฒะฐะตััั ะฟัะธ ะพัะฒะตัะฐั

**ะะพะผะฐะฝะดั:**
```
/support          โ ััะฐััั ัะตะถะธะผะฐ ะฟะพะดะดะตัะถะบะธ
/support_on       โ ะฒะบะปััะธัั ัะตะถะธะผ ะฟะพะดะดะตัะถะบะธ
/support_off      โ ะฒัะบะปััะธัั

/ticket_new <ัะตะผะฐ>    โ ัะพะทะดะฐัั ัะธะบะตั
/ticket_list          โ ะผะพะธ ัะธะบะตัั
/ticket_view <id>     โ ะฟัะพัะผะพัั ัะธะบะตัะฐ
/ticket_select <id>   โ ะฒัะฑัะฐัั ัะธะบะตั ะดะปั ะบะพะฝัะตะบััะฐ
/ticket_close <id>    โ ะทะฐะบัััั ัะธะบะตั
/tickets_all          โ ะฒัะต ะพัะบััััะต ัะธะบะตัั
```

**ะัะธะผะตั:**
```
ะะพะปัะทะพะฒะฐัะตะปั: /ticket_new ะะพัะตะผั ะฝะต ัะฐะฑะพัะฐะตั ะฐะฒัะพัะธะทะฐัะธั?
ะะพั: โ ะขะธะบะตั #6 ัะพะทะดะฐะฝ!

ะะพะปัะทะพะฒะฐัะตะปั: ะัะธะปะพะถะตะฝะธะต ะฟะพะบะฐะทัะฒะฐะตั ะพัะธะฑะบั ะฟัะธ ะทะฐะฟััะบะต
ะะพั: [ะัะฒะตั ั ััััะพะผ FAQ ะธ ะบะพะฝัะตะบััะฐ ัะธะบะตัะฐ]
     ๐ง ะะตะถะธะผ ะฟะพะดะดะตัะถะบะธ Bookechi | ๐ ะขะธะบะตั #6
```

### 0.1. ะะฒัะพะผะฐัะธะทะฐัะธั ัะตะฒัั ะบะพะดะฐ โ

ะะพะผะฐะฝะดะฐ `/review` ะฐะฝะฐะปะธะทะธััะตั ะบะพะผะผะธัั ะธ PR ั GitHub:
- ะะพะปััะฐะตั diff ัะตัะตะท GitHub API
- ะัะฟะพะปัะทัะตั RAG ะดะปั ะบะพะฝัะตะบััะฐ ะฟัะพะตะบัะฐ
- ะะตะฝะตัะธััะตั ัะตะฒัั ั ะทะฐะผะตัะฐะฝะธัะผะธ

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
```
/review https://github.com/FuwaFuwaT1me/Bookechi/commit/c4427abdd9a9bd7e90e87bb35bcaf9cd2f35a02b
/review https://github.com/FuwaFuwaT1me/Bookechi/pull/1
```

ะะพั ะฟัะพะฐะฝะฐะปะธะทะธััะตั ะธะทะผะตะฝะตะฝะธั ะธ ะฒัะดะฐัั:
- ะะฑััั ะพัะตะฝะบั ะธะทะผะตะฝะตะฝะธะน
- ะะพะทะธัะธะฒะฝัะต ะผะพะผะตะฝัั
- ะะพะฝะบัะตัะฝัะต ะทะฐะผะตัะฐะฝะธั (ะฑะฐะณะธ, ะฐััะธัะตะบัััะฐ, ััะธะปั)
- ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ัะปัััะตะฝะธั

### 1. RAG ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ ะฟัะพะตะบัะฐ โ

ะะฐะทะฐ ะทะฝะฐะฝะธะน ัะตะฟะตัั ัะพะดะตัะถะธั:
- ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ Bookechi (`kb/bookechi_docs.md`)
- ะััะพะดะฝัะน ะบะพะด ะฒัะตั Kotlin ัะฐะนะปะพะฒ ะธะท ัะตะฟะพะทะธัะพัะธั
- ะะฝะดะตะบั: `doc_index/bookechi.sqlite` (394 ัะฐะฝะบะฐ)

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
```
/kb_status        โ ััะฐััั ะฑะฐะทั ะทะฝะฐะฝะธะน
/kb_ask <ะฒะพะฟัะพั>  โ ะทะฐะดะฐัั ะฒะพะฟัะพั ะฟะพ ะดะพะบัะผะตะฝัะฐัะธะธ
/kb_reindex       โ ะฟะตัะตัะพะฑัะฐัั ะธะฝะดะตะบั
```

### 2. MCP ะดะปั Git-ัะตะฟะพะทะธัะพัะธั โ

ะกะพะทะดะฐะฝ MCP ัะตัะฒะตั (`mcp-git-server/git_mcp_server.py`) ั ะธะฝััััะผะตะฝัะฐะผะธ:
- `git_branch` โ ัะตะบััะฐั ะฒะตัะบะฐ
- `git_status` โ ะธะทะผะตะฝัะฝะฝัะต ัะฐะนะปั
- `git_log` โ ะธััะพัะธั ะบะพะผะผะธัะพะฒ
- `git_diff` โ ะฟัะพัะผะพัั ะธะทะผะตะฝะตะฝะธะน
- `read_file` โ ััะตะฝะธะต ัะฐะนะปะพะฒ
- `list_files` โ ัะฟะธัะพะบ ัะฐะนะปะพะฒ
- `search_code` โ ะฟะพะธัะบ ะฟะพ ะบะพะดั
- `file_history` โ ะธััะพัะธั ัะฐะนะปะฐ

**Telegram ะบะพะผะฐะฝะดั:**
```
/git_status       โ ััะฐััั ัะตะฟะพะทะธัะพัะธั
/git_branch       โ ัะตะบััะฐั ะฒะตัะบะฐ
/git_log [N]      โ ะฟะพัะปะตะดะฝะธะต N ะบะพะผะผะธัะพะฒ
/git_files [ะฟััั] โ ัะฐะนะปั ะฒ ะดะธัะตะบัะพัะธะธ
/git_show <ัะฐะนะป>  โ ะฟะพะบะฐะทะฐัั ัะพะดะตัะถะธะผะพะต ัะฐะนะปะฐ
/review <url>     โ ัะตะฒัั ะบะพะผะผะธัะฐ/PR ั GitHub
```

### 3. ะะพะผะฐะฝะดะฐ /help โ

ะฃะผะฝัะน ะฟะพะผะพัะฝะธะบ ะฟะพ ะฟัะพะตะบัั, ะธัะฟะพะปัะทัััะธะน RAG + Git:

```
/help                    โ ะฟะพะบะฐะทะฐัั ะผะตะฝั ะธ ััะฐััั
/help <ะฒะพะฟัะพั>           โ ะพัะฒะตัะธัั ะฝะฐ ะฒะพะฟัะพั ะพ ะฟัะพะตะบัะต
```

**ะัะธะผะตัั ะฒะพะฟัะพัะพะฒ:**
- `/help ะบะฐะบ ะดะพะฑะฐะฒะธัั ะฝะพะฒัั ะบะฝะธะณั?`
- `/help ะบะฐะบะฐั ะฐััะธัะตะบัััะฐ ะธัะฟะพะปัะทัะตััั?`
- `/help ะฟะพะบะฐะถะธ ะฟัะธะผะตั ViewModel`
- `/help ะบะฐะบะธะต ะทะฐะฒะธัะธะผะพััะธ ะฒ ะฟัะพะตะบัะต?`
- `/help ะบะฐะบ ัะฐะฑะพัะฐะตั Room ะฒ ะฟัะพะตะบัะต?`
- `/help ะฟะพะบะฐะถะธ ััััะบัััั ะผะพะดะตะปะธ Book`

## ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
server/
โโโ bookechi_repo/              # ะกะบะปะพะฝะธัะพะฒะฐะฝะฝัะน ัะตะฟะพะทะธัะพัะธะน Bookechi
โ   โโโ app/src/main/java/...   # ะััะพะดะฝัะน ะบะพะด ะฟัะธะปะพะถะตะฝะธั
โโโ kb/
โ   โโโ bookechi_docs.md        # ะขะตัะฝะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั (ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ)
โ   โโโ bookechi_faq.md         # FAQ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะดะปั ัะฐะฟะฟะพััะฐ)
โ   โโโ knowledge_base.txt      # ะกัะฐัะฐั KB (ะฝะต ะธัะฟะพะปัะทัะตััั)
โโโ doc_index/
โ   โโโ bookechi.sqlite         # RAG ะธะฝะดะตะบั Bookechi (398 ัะฐะฝะบะพะฒ)
โ   โโโ knowledge_base.sqlite   # ะกัะฐััะน ะธะฝะดะตะบั
โโโ mcp-git-server/
โ   โโโ git_mcp_server.py       # MCP ัะตัะฒะตั ะดะปั Git
โ   โโโ README.md               # ะะพะบัะผะตะฝัะฐัะธั MCP ัะตัะฒะตัะฐ
โโโ telegram_chat_bot/
    โโโ simple_bot.py           # Telegram ะฑะพั ั ะธะฝัะตะณัะฐัะธะตะน
    โโโ tickets.json            # JSON ััะฐะฝะธะปะธัะต ัะธะบะตัะพะฒ (CRM)
    โโโ tasks.json              # JSON ััะตะบะตั ะทะฐะดะฐั (8 ะทะฐะดะฐั)
```

## ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ)

```bash
# ะััั ะบ ัะตะฟะพะทะธัะพัะธั Bookechi (ะฟะพ ัะผะพะปัะฐะฝะธั: bookechi_repo)
BOOKECHI_REPO_PATH=/path/to/bookechi_repo

# ะััั ะบ ะฑะฐะทะต ะทะฝะฐะฝะธะน (ะฟะพ ัะผะพะปัะฐะฝะธั: kb/bookechi_docs.md)
KB_SOURCE_PATH=/path/to/kb/bookechi_docs.md

# ะััั ะบ ะธะฝะดะตะบัั (ะฟะพ ัะผะพะปัะฐะฝะธั: doc_index/bookechi.sqlite)
KB_INDEX_PATH=/path/to/doc_index/bookechi.sqlite
```

## ะะฐะฟััะบ

### 1. ะะฐะฟััะบ Telegram ะฑะพัะฐ
```bash
cd server/telegram_chat_bot
python3 simple_bot.py
```

### 2. ะะฐะฟััะบ MCP ัะตัะฒะตัะฐ (ะพัะดะตะปัะฝะพ, ะตัะปะธ ะฝัะถะฝะพ)
```bash
cd server/mcp-git-server
python3 git_mcp_server.py
```

### 3. ะะฑะฝะพะฒะปะตะฝะธะต ะธะฝะดะตะบัะฐ (ะตัะปะธ ะบะพะด ะธะทะผะตะฝะธะปัั)
```bash
cd server
python3 tools/build_doc_index.py \
  --input kb/bookechi_docs.md \
  --input-dir bookechi_repo/app/src/main/java \
  --ext kt \
  --store sqlite \
  --out doc_index/bookechi.sqlite
```

## ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### RAG ะทะฐะฟัะพัั
```
ะะพะปัะทะพะฒะฐัะตะปั: /help ะบะฐะบะธะต ะผะพะดะตะปะธ ะดะฐะฝะฝัั ะตััั ะฒ ะฟัะพะตะบัะต?
ะะพั: ะ ะฟัะพะตะบัะต Bookechi ะธัะฟะพะปัะทััััั ัะปะตะดัััะธะต ะผะพะดะตะปะธ ะดะฐะฝะฝัั:

1. **Book** โ ะพัะฝะพะฒะฝะฐั ะผะพะดะตะปั ะบะฝะธะณะธ ั ะฟะพะปัะผะธ:
   - id, name, author, coverPath, pages, currentPage, readingStatus

2. **ReadingSession** โ ัะตััะธั ััะตะฝะธั ั ะฟะพะปัะผะธ:
   - id, bookId, date, pagesRead, readingTimeMinutes, startPage, endPage

3. **ReadingStatus** โ enum ััะฐัััะพะฒ:
   - None, Reading, Paused, Stopped

4. **ActivityIntensity** โ ะธะฝัะตะฝัะธะฒะฝะพััั ััะตะฝะธั ะดะปั ัะฐััะพะฒ
...
```

### Git ะบะพะผะฐะฝะดั
```
ะะพะปัะทะพะฒะฐัะตะปั: /git_status
ะะพั:
๐ฟ ะะตัะบะฐ: main
โ ะะฐะฑะพัะฐั ะดะธัะตะบัะพัะธั ัะธััะฐั

ะะพะปัะทะพะฒะฐัะตะปั: /git_show app/src/main/java/fuwafuwa/time/bookechi/data/model/Book.kt
ะะพั:
๐ app/src/main/java/fuwafuwa/time/bookechi/data/model/Book.kt

```kotlin
@Entity
data class Book(
    @PrimaryKey(autoGenerate = true) val id: Long = 0,
    val name: String,
    val author: String,
    ...
)
```
```

### Code Review
```
ะะพะปัะทะพะฒะฐัะตะปั: /review https://github.com/FuwaFuwaT1me/Bookechi/commit/c4427abdd9a9bd7e90e87bb35bcaf9cd2f35a02b

ะะพั:
๐ Code Review
๐ FuwaFuwaT1me/Bookechi
๐ฆ COMMIT: c4427abd
๐ ะคะฐะนะปะพะฒ ะธะทะผะตะฝะตะฝะพ: 5

## ะะฑัะฐั ะพัะตะฝะบะฐ
ะะพะผะผะธั ะดะพะฑะฐะฒะปัะตั ัะธััะตะผั ะพััะปะตะถะธะฒะฐะฝะธั ัะตััะธะน ััะตะฝะธั ั ะฟะพะดะดะตัะถะบะพะน 
ััะฐัะธััะธะบะธ ะธ ัะฐััะพะฒ ะฐะบัะธะฒะฝะพััะธ.

## ะะพะทะธัะธะฒะฝัะต ะผะพะผะตะฝัั
โ ะฅะพัะพัะฐั ััััะบัััะฐ DAO ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Flow
โ ะัะฐะฒะธะปัะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ForeignKey ะดะปั ัะฒัะทะธ ัะฐะฑะปะธั
โ ะงะธัััะน ะบะพะด ั ะฟะพะฝััะฝัะผะธ ะฝะฐะทะฒะฐะฝะธัะผะธ

## ะะฐะผะตัะฐะฝะธั
โ๏ธ ReadingSessionDao.kt:45 - ะััััััะฒัะตั ะพะฑัะฐะฑะพัะบะฐ null ะดะปั ะดะฐัั
โ๏ธ ChartCellData.kt - ะัััะต ะธัะฟะพะปัะทะพะฒะฐัั sealed class ะฒะผะตััะพ data class
...
```

## ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโ
โ  Telegram User  โโโโโโถโ  Telegram Bot    โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโฌโโโโโโโโโโ
                                 โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ                            โ                            โ
    โผ                            โผ                            โผ
โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ  RAG (KB)   โ     โ   /review Command   โ     โ   Git Commands  โ
โ bookechi.   โ     โ                     โ     โ                 โ
โ sqlite      โ     โ  GitHub API (diff)  โ     โ subprocess git  โ
โโโโโโโโโโโโโโโ     โ  + RAG context      โ     โโโโโโโโโโฌโโโโโโโโโ
    โ               โ  + LLM review       โ              โ
    โ               โโโโโโโโโโโโฌโโโโโโโโโโโ              โ
    โ                          โ                         โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโ
                               โ
                               โผ
                    โโโโโโโโโโโโโโโโโโโโโโโ
                    โ   Bookechi Repo     โ
                    โ   (local clone)     โ
                    โโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะฐะนะฟะปะฐะนะฝ /review
```
GitHub URL โโโถ Fetch .diff โโโถ Extract files โโโถ RAG context โโโถ LLM โโโถ Review
                   โ                                  โ
                   โผ                                  โผ
              Git diff                        bookechi.sqlite
            (11KB+ text)                     (project docs/code)
```

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### RAG Pipeline
1. ะะพะบัะผะตะฝัะฐัะธั ัะฐะทะฑะธะฒะฐะตััั ะฝะฐ ัะฐะฝะบะธ (1200 ัะธะผะฒะพะปะพะฒ ั ะฟะตัะตะบัััะธะตะผ 150)
2. ะะฐะถะดัะน ัะฐะฝะบ ะฟัะตะพะฑัะฐะทัะตััั ะฒ ัะผะฑะตะดะดะธะฝะณ (paraphrase-multilingual-MiniLM-L12-v2)
3. ะัะธ ะทะฐะฟัะพัะต: ะฒะพะฟัะพั โ ัะผะฑะตะดะดะธะฝะณ โ cosine similarity โ top-k ัะฐะฝะบะพะฒ
4. ะะพะฝัะตะบัั ะฟะตัะตะดะฐัััั ะฒ LLM ะดะปั ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะฐ

### Git ะธะฝัะตะณัะฐัะธั
1. ะััะผัะต ะฒัะทะพะฒั git ัะตัะตะท subprocess
2. MCP ัะตัะฒะตั ะดะปั ััะฐะฝะดะฐััะธะทะธัะพะฒะฐะฝะฝะพะณะพ API
3. ะะพะผะฐะฝะดั ะฑะพัะฐ ะดะปั ะฑััััะพะณะพ ะดะพัััะฟะฐ ะบ ััะฐัััั


